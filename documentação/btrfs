Criar o sistema de ficheiros:

# mkfs.btrfs -L mylabel /dev/sdaX


Compressão:

# btrfs filesystem defragment -r -v -clzo /


Criar um subvolume:

# btrfs subvolume create /path/to/subvolume


Listar subvolumes:

# btrfs subvolume list -p path


Apagar um subvolume:

# btrfs subvolume delete /path/to/subvolume


Verificar o subvolume padrão:

$ sudo btrfs subvolume get-default /

Mudar o subvolume padrão:

# btrfs subvolume set-default <subvolume-id> /


Snapshots:

To create a snapshot:

# mount -t btrfs -o subvolid=0 /dev/sdaX /mnt/

# btrfs subvolume snapshot fonte destino

To create a readonly snapshot add the -r flag. To create writable version of a readonly snapshot, simply create a snapshot of it. 

Criar directorias em vez de subvolumes automáticos pelo systemd:

$ sudo btrfs subvolume delete /var/lib/machines/
$ sudo mkdir /var/lib/machines/
$ sudo btrfs subvolume delete /var/lib/portables/
$ sudo mkdir /var/lib/portables/

Criar um subvolume para guardar os snapshots

$ sudo mount -t btrfs -o subvolid=0 /dev/sdaX /mnt/
$ sudo btrfs subvolume create /mnt/@snapshots
$ sudo btrfs subvolume snapshot /mnt/@ /mnt/@snapshots/arch-01-09-2025
